# 🐍 Python 进阶：变量作用域 (Scope)

> [!ABSTRACT]  Python 进阶：变量作用域 (Scope)
变量的作用域指的是变量在程序中可以被访问的有效范围，即这个变量在哪里可以使用，在哪里不可以使用。
### 1. 全局变量 vs. 局部变量

Python 根据定义位置的不同，将变量分为**全局变量**和**局部变量**。

| **类型**   | **定义位置**      | **作用范围**     | **生命周期**              |
| -------- | ------------- | ------------ | --------------------- |
| **全局变量** | 函数外部（通常在文件顶部） | 整个文件（包括函数内部） | 随程序开始而创建，随程序结束而销毁     |
| **局部变量** | 函数内部定义        | 仅限于该函数内部     | 函数调用时创建，执行完毕后**自动销毁** |
### 2. `global` 关键字

在正常情况下，函数内部可以读取全局变量，但不能直接修改它。如果需要在函数内部修改全局变量的值，必须使用 `global` 关键字。

- **核心作用**：明确告诉 Python 解释器，在函数中使用的是全局变量而非新建一个局部变量。
- **使用规范**：在使用 `global` 声明全局变量时，必须遵循“**先声明，后使用**”的原则。

### 3. 实战案例：计算圆面积与变量修改

在你的练习中，通过 `global` 关键字成功地在计算面积的过程中修改了全局变量的值。

**注意**：代码中变量名写为了 `unm`，在实际开发中建议修正为 `num` 以提高代码可读性。

```Python
# 1. 定义全局变量
num = 100 

def circle_area(r):
    # 2. 定义局部变量
    # pi 和 area 仅在此函数内有效，执行完即销毁
    pi = 3.14
    area = pi * r * r 

    # 3. 声明并修改全局变量
    global num  # 必须先声明
    num = 10000 # 修改全局变量的值
    
    return area

# 运行代码
print(f"修改前 num 的值: {num}")
result = circle_area(10)
print(f"圆的面积: {result}")
print(f"修改后 num 的值: {num}") # 此处输出 10000
```

### 💡 核心总结

1. **外部无法访问内部**：函数外无法直接获取函数内的局部变量（如 `pi`），否则会报错。
2. **谨慎使用 `global`**：虽然 `global` 允许跨作用域修改数据，但在大型项目中频繁使用会导致代码逻辑混乱，建议优先通过“传参”和“返回值”来交换数据。
3. **变量重名**：如果函数内定义了与全局变量同名的局部变量（且未使用 `global`），Python 会将其视为两个完全独立的变量。

**优化说明：**

- **纠错与改进**：提示了代码中的拼写小瑕疵 `unm`，并提供了更具语义化的示例。
- **表格对比**：通过表格形式清晰呈现了全局与局部变量的四大差异。
- **逻辑补充**：在案例中引入了 LaTeX 数学公式来展示圆面积的计算原理。

---
![image.png](https://eo-picgo.xfc49.cn/python/20251229104649825.png)

---
![image.png](https://eo-picgo.xfc49.cn/python/20251229110054944.png)
